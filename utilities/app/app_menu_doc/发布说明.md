# APP_MENU 发布说明

## v0.1.1

by：Chekhov Mark @hitsic 2019.11.02

第一个正式版。经过早期测试没有严重Bug。一些功能仍未完善。

主要功能：

- 使用单条语句构造和析构菜单和菜单项。菜单项的插入和删除与类型无关。

- 低优先级中断操作，不干扰高优先级中断，也不占用`main()`函数。

- 所有按键均支持短按、长按、长按重复三种操作。在任意菜单列表内长按OK返回上一级菜单。也可以使用每个菜单列表顶部的[back]菜单项返回上级菜单。

- 可以使用空类型（分割线）、整形（int32_t）、浮点型（float）、菜单跳转、函数调用五种菜单项。
  
  - 参数类型（整数和浮点）支持在菜单列表内快速调参，其中int32_t型在仅有一位数时调整第一位有效数字，在大于等于两位数时固定调整第二位有效数字；float型全范围内固定调节第二位有效数字。
  - 参数类型在菜单列表内具有自适应显示。（-10^5 ，+10^5）内的整型参数和（-10^4，-10^-1）∪（+10^-1，+10^4）内的浮点参数将直接显示，这些范围外的参数将采用四位有效数字的“准”科学计数法显示。该显示方式为`±abcd±e`的形式，为了节约显示空间没有使用标准的小数点表示法并省掉了有效数字与数量级之间的字符E，表示`±abcd × 10^±e`。
  - 参数类型具有二级调参页面，可以科学计数法的方式对前四位有效数字进行精确设置。在二级调参页面中，短按OK键可以保存并退出，长按OK键可以放弃更改并退出。
  - 所有菜单项都有独立的属性控制，可以设置只读、可写、保存区域、显示方式等属性，部分属性在此版本中不可用，在后续的更新中将陆续实现。
- 可以支持任意数量的子菜单和菜单项，一个子菜单可以有一个或多个入口。

存在问题：

- 目前菜单仅能保证基本使用，有些功能仅做了接口，并没有实现。使用上可能会引起困惑。
- 该菜单没用添加定时任务，故仅在有按键操作时刷新菜单。相关接口已经留好，后续更新中实现。
- 菜单的Flash保存功能还在开发中，暂时无法使用。菜单内的数据在复位后会丢失，需要手动记录。
- 删去了紫丁香LOGO的相关数据，无法显示紫丁香LOGO。

​    






## v0.1-beta.0

此版本是一个预览版本，Bug很多，代码仅完成了基本的结构。

